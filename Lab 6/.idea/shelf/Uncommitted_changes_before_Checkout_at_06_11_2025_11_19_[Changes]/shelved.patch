Index: src/main/java/ru/ssau/tk/enjoyers/ooplabs/services/AdvancedSearchService.java
===================================================================
diff --git a/src/main/java/ru/ssau/tk/enjoyers/ooplabs/services/AdvancedSearchService.java b/src/main/java/ru/ssau/tk/enjoyers/ooplabs/search/AdvancedSearchService.java
rename from src/main/java/ru/ssau/tk/enjoyers/ooplabs/services/AdvancedSearchService.java
rename to src/main/java/ru/ssau/tk/enjoyers/ooplabs/search/AdvancedSearchService.java
--- a/src/main/java/ru/ssau/tk/enjoyers/ooplabs/services/AdvancedSearchService.java	(revision d19ea4fa21098e084f024c61e9e82edf4d0e4494)
+++ b/src/main/java/ru/ssau/tk/enjoyers/ooplabs/search/AdvancedSearchService.java	(date 1762413226224)
@@ -1,4 +1,4 @@
-package ru.ssau.tk.enjoyers.ooplabs.services;
+package ru.ssau.tk.enjoyers.ooplabs.search;
 
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
@@ -10,8 +10,7 @@
 import org.springframework.stereotype.Service;
 
 import jakarta.persistence.criteria.Predicate;
-import ru.ssau.tk.enjoyers.ooplabs.models.Function;
-import ru.ssau.tk.enjoyers.ooplabs.repositories.FunctionSearchRepository;
+import ru.ssau.tk.enjoyers.ooplabs.entities.Function;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -141,11 +140,7 @@
             case "points" -> ascending ?
                     functionSearchRepository.findByUserId(userId,
                             PageRequest.of(0, Integer.MAX_VALUE, Sort.by("pointsCount").ascending())).getContent() :
-                    functionSearchRepository.findByUserIdOrderByPointsCountDesc(userId);
-            case "date" -> ascending ?
-                    functionSearchRepository.findByUserId(userId,
-                            PageRequest.of(0, Integer.MAX_VALUE, Sort.by("createdAt").ascending())).getContent() :
-                    functionSearchRepository.findByUserIdOrderByCreatedAtDesc(userId);
+                    functionSearchRepository.findByUserIdOrderByPointCount(userId);
             default -> functionSearchRepository.findByUserId(userId,
                     PageRequest.of(0, Integer.MAX_VALUE)).getContent();
         };
Index: src/main/java/ru/ssau/tk/enjoyers/ooplabs/repositories/FunctionSearchRepository.java
===================================================================
diff --git a/src/main/java/ru/ssau/tk/enjoyers/ooplabs/repositories/FunctionSearchRepository.java b/src/main/java/ru/ssau/tk/enjoyers/ooplabs/search/FunctionSearchRepository.java
rename from src/main/java/ru/ssau/tk/enjoyers/ooplabs/repositories/FunctionSearchRepository.java
rename to src/main/java/ru/ssau/tk/enjoyers/ooplabs/search/FunctionSearchRepository.java
--- a/src/main/java/ru/ssau/tk/enjoyers/ooplabs/repositories/FunctionSearchRepository.java	(revision d19ea4fa21098e084f024c61e9e82edf4d0e4494)
+++ b/src/main/java/ru/ssau/tk/enjoyers/ooplabs/search/FunctionSearchRepository.java	(date 1762413356465)
@@ -1,4 +1,4 @@
-package ru.ssau.tk.enjoyers.ooplabs.repositories;
+package ru.ssau.tk.enjoyers.ooplabs.search;
 
 import org.springframework.data.domain.Page;
 import org.springframework.data.domain.Pageable;
@@ -7,7 +7,7 @@
 import org.springframework.data.jpa.repository.Query;
 import org.springframework.data.repository.query.Param;
 import org.springframework.stereotype.Repository;
-import ru.ssau.tk.enjoyers.ooplabs.models.Function;
+import ru.ssau.tk.enjoyers.ooplabs.entities.Function;
 
 import java.util.List;
 
@@ -25,14 +25,13 @@
 
     // Поиск с сортировкой
     List<Function> findByUserIdOrderByNameAsc(Long userId);
-    List<Function> findByUserIdOrderByPointsCountDesc(Long userId);
-    List<Function> findByUserIdOrderByCreatedAtDesc(Long userId);
+    List<Function> findByUserIdOrderByPointCount(Long userId);
 
     // Поиск с пагинацией
     Page<Function> findByUserId(Long userId, Pageable pageable);
 
     // Поиск по диапазону
-    List<Function> findByPointsCountBetween(Integer minPoints, Integer maxPoints);
+    List<Function> findByPointCountBetween(Integer minPoints, Integer maxPoints);
 
     // Поиск по нескольким значениям (IN)
     List<Function> findByTypeIn(List<String> types);
@@ -41,16 +40,4 @@
     @Query("SELECT f.type, COUNT(f) FROM Function f WHERE f.userId = :userId GROUP BY f.type")
     List<Object[]> countFunctionsByType(@Param("userId") Long userId);
 
-    // Рекурсивный поиск (если бы была иерархия)
-    @Query(value = "WITH RECURSIVE user_hierarchy AS (" +
-            "  SELECT id FROM users WHERE id = :startUserId " +
-            "  UNION ALL " +
-            "  SELECT u.id FROM users u " +
-            "  INNER JOIN user_hierarchy uh ON u.manager_id = uh.id" +
-            ") SELECT f.* FROM functions f " +
-            "WHERE f.user_id IN (SELECT id FROM user_hierarchy) " +
-            "AND f.name LIKE %:namePattern%",
-            nativeQuery = true)
-    List<Function> findInUserHierarchy(@Param("startUserId") Long startUserId,
-                                             @Param("namePattern") String namePattern);
 }
\ No newline at end of file
Index: src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/PointRepositoryTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.ssau.tk.enjoyers.ooplabs.repositories;\r\n\r\nimport org.junit.jupiter.api.*;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport ru.ssau.tk.enjoyers.ooplabs.Role;\r\nimport ru.ssau.tk.enjoyers.ooplabs.models.Function;\r\nimport ru.ssau.tk.enjoyers.ooplabs.models.Point;\r\nimport ru.ssau.tk.enjoyers.ooplabs.models.User;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\n@DataJpaTest\r\n@ActiveProfiles(\"test\")\r\n@DisplayName(\"Point Repository Tests\")\r\nclass PointRepositoryTest {\r\n\r\n    @Autowired\r\n    private TestEntityManager entityManager;\r\n\r\n    @Autowired\r\n    private PointRepository pointRepository;\r\n\r\n    @Autowired\r\n    private FunctionRepository functionRepository;\r\n\r\n    private User testUser;\r\n    private Function testFunction;\r\n    private Point point1;\r\n    private Point point2;\r\n    private Point point3;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        // Создаем тестового пользователя\r\n        testUser = new User(\"pointuser\", \"password\", Role.USER);\r\n        entityManager.persistAndFlush(testUser);\r\n\r\n        // Создаем тестовую функцию\r\n        testFunction = new Function(testUser.getId(), \"Test Function\", \"Test Function\" \r\n                ,\"TABULATED\", 3,\r\n                \"TABULATED_ARRAY\");\r\n        entityManager.persistAndFlush(testFunction);\r\n\r\n        // Создаем тестовые точки\r\n        point1 = new Point(testFunction.getId(), 0.0, 0.0, 0);\r\n        point2 = new Point(testFunction.getId(), 1.0, 1.0, 1);\r\n        point3 = new Point(testFunction.getId(), 2.0, 4.0, 2);\r\n\r\n        entityManager.persistAndFlush(point1);\r\n        entityManager.persistAndFlush(point2);\r\n        entityManager.persistAndFlush(point3);\r\n    }\r\n\r\n    @AfterEach\r\n    void tearDown() {\r\n        entityManager.clear();\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find points by function ID ordered by index\")\r\n    void findByFunctionIdOrderByIndex() {\r\n        // When\r\n        List<Point> points = pointRepository.findByFunctionIdOrderByIndex(testFunction.getId());\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertEquals(3, points.size(), \"Should find 3 points\"),\r\n                () -> assertEquals(0, points.get(0).getIndex(), \"First point should have index 0\"),\r\n                () -> assertEquals(1, points.get(1).getIndex(), \"Second point should have index 1\"),\r\n                () -> assertEquals(2, points.get(2).getIndex(), \"Third point should have index 2\"),\r\n                () -> assertEquals(0.0, points.get(0).getX(), 0.001),\r\n                () -> assertEquals(4.0, points.get(2).getY(), 0.001)\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find point by function ID and index\")\r\n    void findByFunctionIdAndIndex() {\r\n        // When\r\n        Optional<Point> foundPoint = pointRepository.findByFunctionIdAndIndex(\r\n                testFunction.getId(), 1);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertTrue(foundPoint.isPresent(), \"Point should be found\"),\r\n                () -> assertEquals(1.0, foundPoint.get().getX(), 0.001),\r\n                () -> assertEquals(1.0, foundPoint.get().getY(), 0.001),\r\n                () -> assertEquals(1, foundPoint.get().getIndex())\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find points by function ID and X range\")\r\n    void findByFunctionIdAndXBetween() {\r\n        // When\r\n        List<Point> points = pointRepository.findByFunctionIdAndXBetween(\r\n                testFunction.getId(), 0.5, 1.5);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertEquals(1, points.size(), \"Should find 1 point in X range [0.5, 1.5]\"),\r\n                () -> assertEquals(1.0, points.get(0).getX(), 0.001)\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find points by function ID and Y greater than\")\r\n    void findByFunctionIdAndYGreaterThan() {\r\n        // When\r\n        List<Point> points = pointRepository.findByFunctionIdAndYGreaterThan(\r\n                testFunction.getId(), 0.5);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertEquals(2, points.size(), \"Should find 2 points with Y > 0.5\"),\r\n                () -> assertTrue(points.stream().allMatch(p -> p.getY() > 0.5))\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should delete points by function ID\")\r\n    void deleteByFunctionId() {\r\n        // When\r\n        pointRepository.deleteByFunctionId(testFunction.getId());\r\n\r\n        // Then\r\n        List<Point> pointsAfterDelete = pointRepository.findByFunctionIdOrderByIndex(testFunction.getId());\r\n        assertTrue(pointsAfterDelete.isEmpty(), \"All points should be deleted\");\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should count points by function ID\")\r\n    void countByFunctionId() {\r\n        // When\r\n        long count = pointRepository.countByFunctionId(testFunction.getId());\r\n\r\n        // Then\r\n        assertEquals(3, count, \"Should count 3 points\");\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should check if point exists by function ID and index\")\r\n    void existsByFunctionIdAndIndex() {\r\n        // When & Then\r\n        assertAll(\r\n                () -> assertTrue(pointRepository.existsByFunctionIdAndIndex(testFunction.getId(), 0)),\r\n                () -> assertTrue(pointRepository.existsByFunctionIdAndIndex(testFunction.getId(), 1)),\r\n                () -> assertFalse(pointRepository.existsByFunctionIdAndIndex(testFunction.getId(), 999))\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should save new point\")\r\n    void save() {\r\n        // Given\r\n        Point newPoint = new Point(testFunction.getId(), 3.0, 9.0, 3);\r\n\r\n        // When\r\n        Point savedPoint = pointRepository.save(newPoint);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertNotNull(savedPoint.getId(), \"Saved point should have ID\"),\r\n                () -> assertEquals(3.0, savedPoint.getX(), 0.001),\r\n                () -> assertEquals(9.0, savedPoint.getY(), 0.001),\r\n                () -> assertEquals(3, savedPoint.getIndex()),\r\n                () -> assertEquals(testFunction.getId(), savedPoint.getFunctionId()),\r\n                () -> assertEquals(4, pointRepository.countByFunctionId(testFunction.getId()))\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should update point\")\r\n    void update() {\r\n        // Given\r\n        Point point = pointRepository.findById(point1.getId()).get();\r\n\r\n        // When\r\n        point.setX(5.0);\r\n        point.setY(25.0);\r\n        Point updatedPoint = pointRepository.save(point);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertEquals(5.0, updatedPoint.getX(), 0.001),\r\n                () -> assertEquals(25.0, updatedPoint.getY(), 0.001)\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should delete point by ID\")\r\n    void deleteById() {\r\n        // Given\r\n        Point point = pointRepository.findById(point1.getId()).get();\r\n\r\n        // When\r\n        pointRepository.delete(point);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertFalse(pointRepository.existsById(point1.getId())),\r\n                () -> assertEquals(2, pointRepository.countByFunctionId(testFunction.getId()))\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find point by ID\")\r\n    void findById() {\r\n        // When\r\n        Optional<Point> found = pointRepository.findById(point2.getId());\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertTrue(found.isPresent(), \"Point should be found by ID\"),\r\n                () -> assertEquals(point2.getX(), found.get().getX(), 0.001),\r\n                () -> assertEquals(point2.getY(), found.get().getY(), 0.001),\r\n                () -> assertEquals(point2.getIndex(), found.get().getIndex())\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should handle empty results for non-existent function\")\r\n    void findByFunctionId_NonExistent() {\r\n        // When\r\n        List<Point> points = pointRepository.findByFunctionIdOrderByIndex(999999L);\r\n\r\n        // Then\r\n        assertTrue(points.isEmpty(), \"Should return empty list for non-existent function\");\r\n    }\r\n}
===================================================================
diff --git a/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/PointRepositoryTest.java b/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/PointRepositoryTest.java
--- a/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/PointRepositoryTest.java	(revision d19ea4fa21098e084f024c61e9e82edf4d0e4494)
+++ b/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/PointRepositoryTest.java	(date 1762413033279)
@@ -5,6 +5,7 @@
 import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
 import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;
 import org.springframework.test.context.ActiveProfiles;
+import ru.ssau.tk.enjoyers.ooplabs.DataGenerator;
 import ru.ssau.tk.enjoyers.ooplabs.Role;
 import ru.ssau.tk.enjoyers.ooplabs.models.Function;
 import ru.ssau.tk.enjoyers.ooplabs.models.Point;
@@ -30,31 +31,19 @@
     private FunctionRepository functionRepository;
 
     private User testUser;
-    private Function testFunction;
-    private Point point1;
-    private Point point2;
-    private Point point3;
+    private Function testFunction ;
+    private List<Point> testPoints;
 
     @BeforeEach
     void setUp() {
-        // Создаем тестового пользователя
-        testUser = new User("pointuser", "password", Role.USER);
+        testUser = DataGenerator.generateUsers(1).getFirst();
         entityManager.persistAndFlush(testUser);
 
-        // Создаем тестовую функцию
-        testFunction = new Function(testUser.getId(), "Test Function", "Test Function" 
-                ,"TABULATED", 3,
-                "TABULATED_ARRAY");
+        testFunction = DataGenerator.generateFunctions(testUser.getId(), 1).getFirst();
         entityManager.persistAndFlush(testFunction);
 
-        // Создаем тестовые точки
-        point1 = new Point(testFunction.getId(), 0.0, 0.0, 0);
-        point2 = new Point(testFunction.getId(), 1.0, 1.0, 1);
-        point3 = new Point(testFunction.getId(), 2.0, 4.0, 2);
-
-        entityManager.persistAndFlush(point1);
-        entityManager.persistAndFlush(point2);
-        entityManager.persistAndFlush(point3);
+        testPoints = DataGenerator.generatePoints(testFunction.getId(), 3, 0, 2);
+        for (Point point : testPoints) entityManager.persistAndFlush(point);
     }
 
     @AfterEach
@@ -70,12 +59,12 @@
 
         // Then
         assertAll(
-                () -> assertEquals(3, points.size(), "Should find 3 points"),
-                () -> assertEquals(0, points.get(0).getIndex(), "First point should have index 0"),
-                () -> assertEquals(1, points.get(1).getIndex(), "Second point should have index 1"),
-                () -> assertEquals(2, points.get(2).getIndex(), "Third point should have index 2"),
-                () -> assertEquals(0.0, points.get(0).getX(), 0.001),
-                () -> assertEquals(4.0, points.get(2).getY(), 0.001)
+                () -> assertEquals(testPoints.size(), points.size(), "Should find 3 points"),
+                () -> assertEquals(testPoints.get(0).getIndex(), points.get(0).getIndex(), "First point should have index 0"),
+                () -> assertEquals(testPoints.get(1).getIndex(), points.get(1).getIndex(), "Second point should have index 1"),
+                () -> assertEquals(testPoints.get(2).getIndex(), points.get(2).getIndex(), "Third point should have index 2"),
+                () -> assertEquals(testPoints.get(0).getX(), points.get(0).getX(), 0.001),
+                () -> assertEquals(testPoints.get(2).getY(), points.get(2).getY(), 0.001)
         );
     }
 
@@ -89,9 +78,9 @@
         // Then
         assertAll(
                 () -> assertTrue(foundPoint.isPresent(), "Point should be found"),
-                () -> assertEquals(1.0, foundPoint.get().getX(), 0.001),
-                () -> assertEquals(1.0, foundPoint.get().getY(), 0.001),
-                () -> assertEquals(1, foundPoint.get().getIndex())
+                () -> assertEquals(testPoints.get(1).getX(), foundPoint.get().getX(), 0.001),
+                () -> assertEquals(testPoints.get(1).getY(), foundPoint.get().getY(), 0.001),
+                () -> assertEquals(testPoints.get(1).getIndex(), foundPoint.get().getIndex())
         );
     }
 
@@ -105,7 +94,7 @@
         // Then
         assertAll(
                 () -> assertEquals(1, points.size(), "Should find 1 point in X range [0.5, 1.5]"),
-                () -> assertEquals(1.0, points.get(0).getX(), 0.001)
+                () -> assertTrue(points.get(0).getX() >= 0.5 && points.get(0).getX() <= 1.5)
         );
     }
 
@@ -158,28 +147,18 @@
     @Test
     @DisplayName("Should save new point")
     void save() {
-        // Given
-        Point newPoint = new Point(testFunction.getId(), 3.0, 9.0, 3);
+        Point newPoint = DataGenerator.generatePoints(testFunction.getId(), 1, 2, 4).getFirst();
 
-        // When
         Point savedPoint = pointRepository.save(newPoint);
 
-        // Then
-        assertAll(
-                () -> assertNotNull(savedPoint.getId(), "Saved point should have ID"),
-                () -> assertEquals(3.0, savedPoint.getX(), 0.001),
-                () -> assertEquals(9.0, savedPoint.getY(), 0.001),
-                () -> assertEquals(3, savedPoint.getIndex()),
-                () -> assertEquals(testFunction.getId(), savedPoint.getFunctionId()),
-                () -> assertEquals(4, pointRepository.countByFunctionId(testFunction.getId()))
-        );
+        assertNotNull(savedPoint);
     }
 
     @Test
     @DisplayName("Should update point")
     void update() {
         // Given
-        Point point = pointRepository.findById(point1.getId()).get();
+        Point point = pointRepository.findById(testPoints.getFirst().getId()).get();
 
         // When
         point.setX(5.0);
@@ -197,14 +176,14 @@
     @DisplayName("Should delete point by ID")
     void deleteById() {
         // Given
-        Point point = pointRepository.findById(point1.getId()).get();
+        Point point = pointRepository.findById(testPoints.getFirst().getId()).get();
 
         // When
         pointRepository.delete(point);
 
         // Then
         assertAll(
-                () -> assertFalse(pointRepository.existsById(point1.getId())),
+                () -> assertFalse(pointRepository.existsById(testPoints.getFirst().getId())),
                 () -> assertEquals(2, pointRepository.countByFunctionId(testFunction.getId()))
         );
     }
@@ -212,15 +191,15 @@
     @Test
     @DisplayName("Should find point by ID")
     void findById() {
-        // When
-        Optional<Point> found = pointRepository.findById(point2.getId());
+        Point expectedPoint = testPoints.get(1);
 
-        // Then
+        Optional<Point> found = pointRepository.findById(expectedPoint.getId());
+
         assertAll(
                 () -> assertTrue(found.isPresent(), "Point should be found by ID"),
-                () -> assertEquals(point2.getX(), found.get().getX(), 0.001),
-                () -> assertEquals(point2.getY(), found.get().getY(), 0.001),
-                () -> assertEquals(point2.getIndex(), found.get().getIndex())
+                () -> assertEquals(expectedPoint.getX(), found.get().getX(), 0.001),
+                () -> assertEquals(expectedPoint.getY(), found.get().getY(), 0.001),
+                () -> assertEquals(expectedPoint.getIndex(), found.get().getIndex())
         );
     }
 
Index: src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/UserRepositoryTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ru.ssau.tk.enjoyers.ooplabs.repositories;\r\n\r\nimport org.junit.jupiter.api.*;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport ru.ssau.tk.enjoyers.ooplabs.Role;\r\nimport ru.ssau.tk.enjoyers.ooplabs.entities.User;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\n@DataJpaTest\r\n@ActiveProfiles(\"test\")\r\n@DisplayName(\"User Repository Tests\")\r\nclass UserRepositoryTest {\r\n\r\n    @Autowired\r\n    private TestEntityManager entityManager;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    private User testUser;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        testUser = new User(\"testuser_spring\", \"hashedpassword\", Role.USER);\r\n        entityManager.persistAndFlush(testUser);\r\n    }\r\n\r\n    @AfterEach\r\n    void tearDown() {\r\n        entityManager.clear();\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find user by username\")\r\n    void findByUsername() {\r\n        // When\r\n        Optional<User> found = userRepository.findByUsername(\"testuser_spring\");\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertTrue(found.isPresent()),\r\n                () -> assertEquals(\"testuser_spring\", found.get().getUsername()),\r\n                () -> assertEquals(Role.USER, found.get().getRole())\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should check if user exists by username\")\r\n    void existsByUsername() {\r\n        // When & Then\r\n        assertAll(\r\n                () -> assertTrue(userRepository.existsByUsername(\"testuser_spring\")),\r\n                () -> assertFalse(userRepository.existsByUsername(\"nonexistent\"))\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should find users by role\")\r\n    void findByRole() {\r\n        // Given\r\n        User adminUser = new User(\"admin_spring\", \"password\", Role.ADMIN);\r\n        entityManager.persistAndFlush(adminUser);\r\n\r\n        // When\r\n        List<User> users = userRepository.findByRole(Role.ADMIN);\r\n\r\n        // Then\r\n        assertAll(\r\n                () -> assertFalse(users.isEmpty()),\r\n                () -> assertTrue(users.stream().allMatch(user -> user.getRole() == Role.ADMIN))\r\n        );\r\n    }\r\n\r\n    @Test\r\n    @DisplayName(\"Should not find non-existent user\")\r\n    void findByUsername_NonExistent() {\r\n        // When\r\n        Optional<User> found = userRepository.findByUsername(\"nonexistent_user\");\r\n\r\n        // Then\r\n        assertFalse(found.isPresent());\r\n    }\r\n}
===================================================================
diff --git a/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/UserRepositoryTest.java b/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/UserRepositoryTest.java
--- a/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/UserRepositoryTest.java	(revision d19ea4fa21098e084f024c61e9e82edf4d0e4494)
+++ b/src/test/java/ru/ssau/tk/enjoyers/ooplabs/repositories/UserRepositoryTest.java	(date 1762413033289)
@@ -5,6 +5,7 @@
 import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
 import org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;
 import org.springframework.test.context.ActiveProfiles;
+import ru.ssau.tk.enjoyers.ooplabs.DataGenerator;
 import ru.ssau.tk.enjoyers.ooplabs.Role;
 import ru.ssau.tk.enjoyers.ooplabs.entities.User;
 
@@ -24,11 +25,10 @@
     @Autowired
     private UserRepository userRepository;
 
-    private User testUser;
+    private User testUser = DataGenerator.generateUsers(1).getFirst();
 
     @BeforeEach
     void setUp() {
-        testUser = new User("testuser_spring", "hashedpassword", Role.USER);
         entityManager.persistAndFlush(testUser);
     }
 
@@ -40,23 +40,19 @@
     @Test
     @DisplayName("Should find user by username")
     void findByUsername() {
-        // When
-        Optional<User> found = userRepository.findByUsername("testuser_spring");
+        Optional<User> found = userRepository.findByUsername(testUser.getUsername());
 
-        // Then
         assertAll(
                 () -> assertTrue(found.isPresent()),
-                () -> assertEquals("testuser_spring", found.get().getUsername()),
-                () -> assertEquals(Role.USER, found.get().getRole())
+                () -> assertEquals("perfuser_0", found.get().getUsername())
         );
     }
 
     @Test
     @DisplayName("Should check if user exists by username")
     void existsByUsername() {
-        // When & Then
         assertAll(
-                () -> assertTrue(userRepository.existsByUsername("testuser_spring")),
+                () -> assertTrue(userRepository.existsByUsername(testUser.getUsername())),
                 () -> assertFalse(userRepository.existsByUsername("nonexistent"))
         );
     }
@@ -64,27 +60,19 @@
     @Test
     @DisplayName("Should find users by role")
     void findByRole() {
-        // Given
-        User adminUser = new User("admin_spring", "password", Role.ADMIN);
-        entityManager.persistAndFlush(adminUser);
+        List<User> users = userRepository.findByRole(Role.USER);
 
-        // When
-        List<User> users = userRepository.findByRole(Role.ADMIN);
-
-        // Then
         assertAll(
                 () -> assertFalse(users.isEmpty()),
-                () -> assertTrue(users.stream().allMatch(user -> user.getRole() == Role.ADMIN))
+                () -> assertTrue(users.stream().allMatch(user -> user.getRole() == Role.USER))
         );
     }
 
     @Test
     @DisplayName("Should not find non-existent user")
     void findByUsername_NonExistent() {
-        // When
-        Optional<User> found = userRepository.findByUsername("nonexistent_user");
+        Optional<User> found = userRepository.findByUsername("");
 
-        // Then
         assertFalse(found.isPresent());
     }
 }
\ No newline at end of file
